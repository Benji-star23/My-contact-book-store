<!DOCTYPE html>
<html>
    <head>
        <title>API Key</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div>Please enter a valid API Key</div>
        <form>
            <input type="email" id="apikey" name="apikey"/>
            <button id="submitApikey">Submit</button>
        </form>


        <script>
            let rootPath = "https://mysite.itvarsity.org/api/ContactBook/";
            document.getElementById("submitApikey").addEventListener('click', setApikey);

            function setApikey(e){
                e.preventDefault();

                apikey = document.getElementById("apikey").value;
                fetch(rootPath + "controller/api-key/?apikey=" + apikey)
                        .then(function (response) {
                            return response.text();
                        })
                        .then(function (data) {

                             if (data == "1"){
                                 localStorage.setItem("apikey", apikey);
                                 window.open("index.html", "_self");
                             } else {
                                 alert(data + "Invalid API key entered!");
                             }   
                        })
}
          </script>
    </body>
</html>